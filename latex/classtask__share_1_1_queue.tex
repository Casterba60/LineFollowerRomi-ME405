\doxysection{Queue Class Reference}
\hypertarget{classtask__share_1_1_queue}{}\label{classtask__share_1_1_queue}\index{Queue@{Queue}}


A queue which is used to transfer data from one task to another.  


Inheritance diagram for Queue\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classtask__share_1_1_queue}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtask__share_1_1_queue_abadd6a4110f94771c65b455cf95cedd0}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, type\+\_\+code, size, thread\+\_\+protect=False, overwrite=False, name=None)
\begin{DoxyCompactList}\small\item\em Initialize a queue object to carry and buffer data between tasks. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a23230fa87989a7bc454776fd00723e9e}{put}} (self, item, in\+\_\+\+ISR=False)
\begin{DoxyCompactList}\small\item\em Put an item into the queue. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a51946ea79c3b958c57e11078624fae53}{get}} (self, in\+\_\+\+ISR=False)
\begin{DoxyCompactList}\small\item\em Read an item from the queue. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a3558598f7b28a3a6f31b6b9aacfb6adc}{any}} (self)
\begin{DoxyCompactList}\small\item\em Check if there are any items in the queue. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a672b40650d80df789cdcddf197a0d0ce}{empty}} (self)
\begin{DoxyCompactList}\small\item\em Check if the queue is empty. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a66672113f6265721adf8431845070d9f}{full}} (self)
\begin{DoxyCompactList}\small\item\em Check if the queue is full. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a5914e1f7d365646d71578ca386d4276d}{num\+\_\+in}} (self)
\begin{DoxyCompactList}\small\item\em Check how many items are in the queue. \end{DoxyCompactList}\item 
\Hypertarget{classtask__share_1_1_queue_a8354e616a668be156c0d212186e64c43}\label{classtask__share_1_1_queue_a8354e616a668be156c0d212186e64c43} 
{\bfseries clear} (self)
\begin{DoxyCompactList}\small\item\em Remove all contents from the queue. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtask__share_1_1_queue_a61a1f3a6a4df93d491cd753f617782a2}{\+\_\+\+\_\+repr\+\_\+\+\_\+}} (self)
\begin{DoxyCompactList}\small\item\em This method puts diagnostic information about the queue into a string. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classtask__share_1_1_base_share}{Base\+Share}}}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classtask__share_1_1_queue_a4ef59041ea96e1ef4e7dc02a7797d51c}\label{classtask__share_1_1_queue_a4ef59041ea96e1ef4e7dc02a7797d51c} 
int {\bfseries ser\+\_\+num} = 0
\begin{DoxyCompactList}\small\item\em A counter used to give serial numbers to queues for diagnostic use. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classtask__share_1_1_queue_a5d57df8a8fe9f485bea019ae59af5924}\label{classtask__share_1_1_queue_a5d57df8a8fe9f485bea019ae59af5924} 
{\bfseries \+\_\+size} = size
\item 
\Hypertarget{classtask__share_1_1_queue_a87ae8dd055726a799a7c6e3415295d22}\label{classtask__share_1_1_queue_a87ae8dd055726a799a7c6e3415295d22} 
{\bfseries \+\_\+overwrite} = overwrite
\item 
str \mbox{\hyperlink{classtask__share_1_1_queue_a705391f3be33314bd5788a28f7538642}{\+\_\+name}}
\item 
\Hypertarget{classtask__share_1_1_queue_a32c725df8235080425c2908d49fb2ca3}\label{classtask__share_1_1_queue_a32c725df8235080425c2908d49fb2ca3} 
{\bfseries \+\_\+buffer} = array.\+array (type\+\_\+code, range (size))
\item 
\Hypertarget{classtask__share_1_1_queue_ac8c062b3a02ef615f6780a32e309b22e}\label{classtask__share_1_1_queue_ac8c062b3a02ef615f6780a32e309b22e} 
int {\bfseries \+\_\+wr\+\_\+idx} = 0
\item 
\Hypertarget{classtask__share_1_1_queue_a42d65774404ef1f486ad14d0caf201f2}\label{classtask__share_1_1_queue_a42d65774404ef1f486ad14d0caf201f2} 
int {\bfseries \+\_\+num\+\_\+items} = self.\+\_\+size
\item 
\Hypertarget{classtask__share_1_1_queue_a73ba6e9fedda702ba5759e20c89e63ac}\label{classtask__share_1_1_queue_a73ba6e9fedda702ba5759e20c89e63ac} 
\# Record maximum fillage {\bfseries \+\_\+max\+\_\+full}
\item 
\Hypertarget{classtask__share_1_1_queue_a0b53a1ad52f793109dbbbeecb275a7b6}\label{classtask__share_1_1_queue_a0b53a1ad52f793109dbbbeecb275a7b6} 
int {\bfseries \+\_\+rd\+\_\+idx} = 0
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classtask__share_1_1_base_share}{Base\+Share}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries \+\_\+type\+\_\+code} = type\+\_\+code
\item 
{\bfseries \+\_\+thread\+\_\+protect} = thread\+\_\+protect
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A queue which is used to transfer data from one task to another. 

If parameter \textquotesingle{}thread\+\_\+protect\textquotesingle{} is {\ttfamily True} when a queue is created, transfers of data will be protected from corruption in the case that one task might interrupt another due to use in a pre-\/emptive multithreading environment or due to one task being run as an interrupt service routine.

An example of the creation and use of a queue is as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{import}\ task\_share}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ This\ queue\ holds\ unsigned\ short\ (16-\/bit)\ integers}}
\DoxyCodeLine{my\_queue\ =\ \mbox{\hyperlink{classtask__share_1_1_queue}{task\_share.Queue}}\ (\textcolor{stringliteral}{'H'},\ 100,\ name=\textcolor{stringliteral}{"{}My\ Queue"{}})}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Somewhere\ in\ one\ task,\ put\ data\ into\ the\ queue}}
\DoxyCodeLine{my\_queue.put\ (some\_data)}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ In\ another\ task,\ read\ data\ from\ the\ queue}}
\DoxyCodeLine{something\ =\ my\_queue.get\ ()}

\end{DoxyCode}
 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classtask__share_1_1_queue_abadd6a4110f94771c65b455cf95cedd0}\index{Queue@{Queue}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_abadd6a4110f94771c65b455cf95cedd0} 
\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{type\+\_\+code}{, }\item[{}]{size}{, }\item[{}]{thread\+\_\+protect}{ = {\ttfamily False}, }\item[{}]{overwrite}{ = {\ttfamily False}, }\item[{}]{name}{ = {\ttfamily None}}\end{DoxyParamCaption})}



Initialize a queue object to carry and buffer data between tasks. 

This method sets up a queue by allocating memory for the contents and setting up the components in an empty configuration.

Each queue can only carry data of one particular type which must be chosen from the following list. The data type is specified by a one-\/letter type code which is given as for the Python {\ttfamily array.\+array} type, which can be any of the following\+: \tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ }&\cellcolor{\tableheadbgcolor}\textbf{ }&\cellcolor{\tableheadbgcolor}\textbf{ }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ }&\cellcolor{\tableheadbgcolor}\textbf{ }&\cellcolor{\tableheadbgcolor}\textbf{ }\\\cline{1-3}
\endhead
{\bfseries{b}} (signed char)   &{\bfseries{B}} (unsigned char)   &8 bit integers    \\\cline{1-3}
{\bfseries{h}} (signed short)   &{\bfseries{H}} (unsigned short)   &16 bit integers    \\\cline{1-3}
{\bfseries{i}} (signed int)   &{\bfseries{I}} (unsigned int)   &32 bit integers (probably)    \\\cline{1-3}
{\bfseries{l}} (signed long)   &{\bfseries{L}} (unsigned long)   &32 bit integers    \\\cline{1-3}
{\bfseries{q}} (signed long long)   &{\bfseries{Q}} (unsigned long long)   &64 bit integers    \\\cline{1-3}
{\bfseries{f}} (float)   &{\bfseries{d}} (double-\/precision float)   &\\\cline{1-3}
\end{longtabu}



\begin{DoxyParams}{Parameters}
{\em type\+\_\+code} & The type of data items which the queue can hold \\
\hline
{\em size} & The maximum number of items which the queue can hold \\
\hline
{\em thread\+\_\+protect} & {\ttfamily True} if mutual exclusion protection is used \\
\hline
{\em overwrite} & If {\ttfamily True}, oldest data will be overwritten with new data if the queue becomes full \\
\hline
{\em name} & A short name for the queue, default {\ttfamily QueueN} where {\ttfamily N} is a serial number for the queue \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classtask__share_1_1_base_share_a091fbc901c72ac48cca8d10831f2d7be}{Base\+Share}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classtask__share_1_1_queue_a61a1f3a6a4df93d491cd753f617782a2}\index{Queue@{Queue}!\_\_repr\_\_@{\_\_repr\_\_}}
\index{\_\_repr\_\_@{\_\_repr\_\_}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{\_\_repr\_\_()}{\_\_repr\_\_()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a61a1f3a6a4df93d491cd753f617782a2} 
\+\_\+\+\_\+repr\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



This method puts diagnostic information about the queue into a string. 

It shows the queue\textquotesingle{}s name and type as well as the maximum number of items and queue size. \Hypertarget{classtask__share_1_1_queue_a3558598f7b28a3a6f31b6b9aacfb6adc}\index{Queue@{Queue}!any@{any}}
\index{any@{any}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{any()}{any()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a3558598f7b28a3a6f31b6b9aacfb6adc} 
any (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Check if there are any items in the queue. 

Returns {\ttfamily True} if there are any items in the queue and {\ttfamily False} if the queue is empty. \begin{DoxyReturn}{Returns}
{\ttfamily True} if items are in the queue, {\ttfamily False} if not 
\end{DoxyReturn}
\Hypertarget{classtask__share_1_1_queue_a672b40650d80df789cdcddf197a0d0ce}\index{Queue@{Queue}!empty@{empty}}
\index{empty@{empty}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{empty()}{empty()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a672b40650d80df789cdcddf197a0d0ce} 
empty (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Check if the queue is empty. 

Returns {\ttfamily True} if there are no items in the queue and {\ttfamily False} if there are any items therein. \begin{DoxyReturn}{Returns}
{\ttfamily True} if queue is empty, {\ttfamily False} if it\textquotesingle{}s not empty 
\end{DoxyReturn}
\Hypertarget{classtask__share_1_1_queue_a66672113f6265721adf8431845070d9f}\index{Queue@{Queue}!full@{full}}
\index{full@{full}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{full()}{full()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a66672113f6265721adf8431845070d9f} 
full (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Check if the queue is full. 

This method returns {\ttfamily True} if the queue is already full and there is no room for more data without overwriting existing data. \begin{DoxyReturn}{Returns}
{\ttfamily True} if the queue is full 
\end{DoxyReturn}
\Hypertarget{classtask__share_1_1_queue_a51946ea79c3b958c57e11078624fae53}\index{Queue@{Queue}!get@{get}}
\index{get@{get}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a51946ea79c3b958c57e11078624fae53} 
get (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{in\+\_\+\+ISR}{ = {\ttfamily False}}\end{DoxyParamCaption})}



Read an item from the queue. 

If there isn\textquotesingle{}t anything in there, wait (blocking the calling process) until something becomes available. If non-\/blocking reads are needed, one should call {\ttfamily \doxylink{classtask__share_1_1_queue_a3558598f7b28a3a6f31b6b9aacfb6adc}{any()}} to check for items before attempting to read from the queue. This is usually done in a low priority task\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{def\ }some\_task\ ():}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{\#\ Setup}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{while}\ \textcolor{keyword}{True}:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ my\_queue.any\ ():}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ something\ =\ my\_queue.get\ ()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ do\_something\_with\ (something)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{\#\ More\ loop\ stuff}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ 0}

\end{DoxyCode}
 
\begin{DoxyParams}{Parameters}
{\em in\+\_\+\+ISR} & Set this to {\ttfamily True} if calling from within an ISR \\
\hline
\end{DoxyParams}
\Hypertarget{classtask__share_1_1_queue_a5914e1f7d365646d71578ca386d4276d}\index{Queue@{Queue}!num\_in@{num\_in}}
\index{num\_in@{num\_in}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{num\_in()}{num\_in()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a5914e1f7d365646d71578ca386d4276d} 
num\+\_\+in (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Check how many items are in the queue. 

This method returns the number of items which are currently in the queue. \begin{DoxyReturn}{Returns}
The number of items in the queue 
\end{DoxyReturn}
\Hypertarget{classtask__share_1_1_queue_a23230fa87989a7bc454776fd00723e9e}\index{Queue@{Queue}!put@{put}}
\index{put@{put}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{put()}{put()}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a23230fa87989a7bc454776fd00723e9e} 
put (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{item}{, }\item[{}]{in\+\_\+\+ISR}{ = {\ttfamily False}}\end{DoxyParamCaption})}



Put an item into the queue. 

If there isn\textquotesingle{}t room for the item, wait (blocking the calling process) until room becomes available, unless the {\ttfamily overwrite} constructor parameter was set to {\ttfamily True} to allow old data to be clobbered. If non-\/blocking behavior without overwriting is needed, one should call {\ttfamily \doxylink{classtask__share_1_1_queue_a66672113f6265721adf8431845070d9f}{full()}} to ensure that the queue is not full before putting data into it\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{def\ }some\_task\ ():}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{\#\ Setup}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{while}\ \textcolor{keyword}{True}:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ my\_queue.full\ ():}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ my\_queue.put\ (create\_something\_to\_put\ ())}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ 0}

\end{DoxyCode}
 
\begin{DoxyParams}{Parameters}
{\em item} & The item to be placed into the queue \\
\hline
{\em in\+\_\+\+ISR} & Set this to {\ttfamily True} if calling from within an ISR \\
\hline
\end{DoxyParams}


\doxysubsection{Field Documentation}
\Hypertarget{classtask__share_1_1_queue_a705391f3be33314bd5788a28f7538642}\index{Queue@{Queue}!\_name@{\_name}}
\index{\_name@{\_name}!Queue@{Queue}}
\doxysubsubsection{\texorpdfstring{\_name}{\_name}}
{\footnotesize\ttfamily \label{classtask__share_1_1_queue_a705391f3be33314bd5788a28f7538642} 
\+\_\+name\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \ \textcolor{keywordtype}{None}\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{'Queue'}\ +\ str\ (Queue.ser\_num)}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{task__share_8py}{task\+\_\+share.\+py}}\end{DoxyCompactItemize}
